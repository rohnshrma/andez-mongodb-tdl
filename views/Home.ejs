<!DOCTYPE html>
<!-- Declares the document type as HTML5, ensuring browsers render the page using HTML5 standards -->

<html lang="en">
  <!-- Root element of the HTML page, with 'lang="en"' specifying English as the document language -->

  <head>
    <!-- Contains metadata like character encoding, viewport settings, and linked resources -->

    <meta charset="UTF-8" />
    <!-- Specifies UTF-8 encoding for proper text display, including special characters -->

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Configures responsive viewport, setting page width to device width and initial zoom to 1.0 -->

    <title>Task Master</title>
    <!-- Sets the webpage title displayed in the browser tab -->

    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
    />
    <!-- Links to Bootstrap 4.5.3 CSS from a CDN for responsive styling -->

    <!-- Font Awesome CSS -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
    />
    <!-- Links to Font Awesome 6.7.2 CSS from a CDN for icons -->

    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css" />
    <!-- Links to a local style.css file for custom styling -->
  </head>

  <body>
    <!-- Contains the visible content of the webpage -->

    <!-- Navigation Header -->
    <div id="nav" class="text-center px-5 shadow-sm py-2 bg-info text-light">
      <!-- Navigation header div with Bootstrap classes: 'text-center' for centered text, 'px-5' for horizontal padding, 'shadow-sm' for a subtle shadow, 'py-2' for vertical padding, 'bg-info' for teal background, 'text-light' for white text -->
      <h1><i class="fa-solid fa-bullseye"></i> Task Master</h1>
      <!-- Displays the app title with a Font Awesome bullseye icon -->
    </div>

    <!-- Task Input Form -->
    <div id="add_form" class="shadow border rounded p-5">
      <!-- Form container with Bootstrap classes: 'shadow' for shadow, 'border' for border, 'rounded' for rounded corners, 'p-5' for large padding -->
      <h2 class="mb-2 text-center">Add New Task</h2>
      <!-- Centered heading for the form with 'mb-2' for small bottom margin -->
      <form action="/" method="post">
        <!-- Form submits data to the root URL ("/") via POST -->
        <div class="form-group">
          <!-- Bootstrap 'form-group' for consistent form element styling -->
          <input
            minlength="8"
            required
            class="form-control"
            name="title_input"
            type="text"
            placeholder="New Task..."
          />
          <!-- Text input with Bootstrap 'form-control' styling, 'minlength="8"' for minimum 8 characters, 'required' to prevent empty submissions, 'name="title_input"' for form data, and 'placeholder' for user hint -->
        </div>
        <div class="form-group">
          <!-- Form group for status dropdown -->
          <select class="form-control" name="status_input">
            <!-- Dropdown with Bootstrap 'form-control' styling and 'name="status_input"' for form data -->
            <option selected disabled>Select Status</option>
            <!-- Default placeholder option, selected and disabled -->
            <option value="pending">Pending</option>
            <!-- Option for "Pending" status -->
            <option value="completed">Completed</option>
            <!-- Option for "Completed" status -->
          </select>
        </div>
        <button type="submit" class="btn btn-block btn-info">
          <i class="fa-solid fa-plus"></i> ADD TASK
        </button>
        <!-- Submit button with Bootstrap classes: 'btn' for button, 'btn-block' for full width, 'btn-info' for teal color, and Font Awesome plus icon -->
      </form>
    </div>

    <div class="filter text-center">
      <a class="btn btn-primary" href="/">All Tasks</a>
      <a class="btn btn-success" href="/completed">Completed</a>
      <a class="btn btn-warning" href="/pending">Pending</a>
    </div>

    <div id="add_form" class="shadow border rounded p-5">
      <!-- Task list container with same ID as form ('add_form'); note: duplicate IDs are invalid HTML and should be unique -->
      <% if (typeof data === typeof []){%>
      <!-- EJS condition checking if 'data' is an array -->
      <% data.forEach(task => { %>
      <!-- EJS loop iterating over each 'task' in the 'data' array -->
      <div
        class="shadow p-2 px-4 mb-2 border rounded d-flex justify-content-between align-items-center"
      >
        <!-- Task div with Bootstrap classes: 'shadow' for shadow, 'p-2' for padding, 'px-4' for extra horizontal padding, 'mb-2' for bottom margin, 'border' for border, 'rounded' for rounded corners, 'd-flex' for flexbox, 'justify-content-between' for spacing, 'align-items-center' for vertical centering -->
        <h6><%= task.title %></h6>
        <!-- Displays task title as a level-6 heading (changed from h3 in previous version) using EJS to render 'title' -->
        <span class="badge badge-primary"><%= task.status %></span>
        <!-- Displays task status in a Bootstrap badge with 'badge-primary' for blue color -->
        <a href="/delete/<%= task._id %>" class="btn btn-ranger btn-sm">
          <i class="fa-solid fa-trash"></i>
        </a>
        <!-- New delete button as a link to '/delete/:id' with task._id, styled with Bootstrap 'btn' and 'btn-sm' for small size, and Font Awesome trash icon; note: 'btn-ranger' is likely a typo for 'btn-danger' -->
      </div>
      <% }) %>
      <!-- Closes the EJS forEach loop -->
      <%}else{%>
      <!-- EJS else block for when 'data' is not an array -->
      <h2 class="text-center">No Tasks Found</h2>
      <!-- Displays centered message when no tasks are available -->
      <%} %>
      <!-- Closes the EJS conditional block -->
    </div>

    <!-- Bootstrap JavaScript -->
    <script
      src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
      integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
      crossorigin="anonymous"
    ></script>
    <!-- Includes jQuery 3.5.1 (slim) from CDN for Bootstrap JavaScript functionality -->

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
      crossorigin="anonymous"
    ></script>
    <!-- Includes Bootstrap 4.5.3 JavaScript bundle (with Popper.js) from CDN for interactive components -->
  </body>
</html>
